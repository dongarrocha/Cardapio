<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Garrocha - CardÃ¡pio</title>

  <style>
    body { margin:0; font-family:system-ui; background:#f5f5f5; }

    header{
      background:#8B0000;
      padding:12px;
      color:white;
      display:flex;
      align-items:center;
      gap:12px;
    }

    header img{
      width:60px;
      border-radius:6px;
    }

    h2{ margin:20px 10px; }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:16px;
      padding:10px;
    }

    .item{
      background:white;
      border-radius:10px;
      padding:10px;
      text-align:center;
      border:1px solid #ddd;
    }

    .item img{
      width:100%;
      height:160px;
      object-fit:cover;
      border-radius:8px;
      background:#eee;
    }

    .btn{
      background:#1976d2;
      color:white;
      padding:10px;
      width:100%;
      border:none;
      border-radius:6px;
      cursor:pointer;
      margin-top:10px;
    }

    .cart{
      background:white;
      padding:20px;
      position:fixed;
      right:0;
      top:0;
      width:280px;
      height:100%;
      border-left:3px solid #1976d2;
      overflow:auto;
    }

    .mobile-cart {
      position: fixed;
      bottom: -60px;
      left: 0;
      width: 100%;
      background: #1976d2;
      color: white;
      text-align: center;
      padding: 14px;
      font-size: 16px;
      font-weight: 600;
      transition: bottom 0.3s;
      cursor: pointer;
      z-index: 999;
    }

    @media(min-width: 768px){
      .mobile-cart { display: none; }
    }
  </style>
</head>

<body>

<header>
  <img src="imagens/garrocha.png" alt="Logo Garrocha">
  <div>
    <strong>CardÃ¡pio â€” Espetos, Bebidas, Sobremesas e Lanches</strong><br>
    <small>Toque para adicionar ao carrinho â€” depois envie via WhatsApp.</small>
  </div>
</header>

<h2>Espetos</h2>

<div id="menu" class="grid"></div>

<div class="cart">
  <h3>Seu Pedido</h3>
  <p>Total itens: <span id="itemsTotal">0</span></p>
  <p>Valor total: <span id="grandTotal">R$ 0,00</span></p>

  <br>
  <button class="btn" onclick="sendWhatsApp()">Enviar pelo WhatsApp ðŸ“²</button>
</div>

<div id="mobileBar" class="mobile-cart" onclick="scrollToCart()">
  ðŸ›’ <span id="mobileItems">0</span> itens â€” <span id="mobileTotal">R$ 0,00</span> | Ver Pedido
</div>


<script>
const money = v => v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});

const menu = [
  { nome:"Carne", preco:21, imagem:"imagens/carne.png" },
  { nome:"Carne c Bacon", preco:22, imagem:"imagens/carne_bacon.png" },
  { nome:"Carne e Frango", preco:20, imagem:"imagens/carne_frango.png" },
  { nome:"CoraÃ§Ã£o Boi", preco:18, imagem:"imagens/coracao.png" },
  { nome:"Frango", preco:17, imagem:"imagens/frango.png" },
  { nome:"LinguiÃ§a", preco:15, imagem:"imagens/linguica.png" }
];

let cart = [];

function renderMenu(){
  const div = document.getElementById("menu");
  div.innerHTML = "";
  menu.forEach((p,i)=>{
    div.innerHTML += `
      <div class="item">
        <img src="${p.imagem}" onerror="this.src='https://via.placeholder.com/200?text=Sem+Imagem'">
        <h4>${p.nome}</h4>
        <p>${money(p.preco)}</p>
        <button class="btn" onclick="add(${i})">Adicionar</button>
      </div>
    `;
  });
}

function add(i){
  cart.push(menu[i]);
  renderCart();
}

function renderCart(){
  document.getElementById("itemsTotal").innerText = cart.length;
  
  const total = cart.reduce((s,p)=>s+p.preco,0);
  document.getElementById("grandTotal").innerText = money(total);

  // mobile bar update
  document.getElementById("mobileItems").innerText = cart.length;
  document.getElementById("mobileTotal").innerText = money(total);

  const bar=document.getElementById("mobileBar");
  bar.style.bottom = (cart.length>0) ? "0px" : "-60px";
}

function scrollToCart(){
  document.querySelector(".cart").scrollIntoView({behavior:"smooth"});
}

function sendWhatsApp(){
  if(cart.length===0) return alert("Carrinho vazio!");

  let msg="Pedido Garrocha:\n\n";
  cart.forEach(i=> msg+=`ðŸŸ¢ ${i.nome} - ${money(i.preco)}\n`);
  
  msg+=`\nTOTAL: ${document.getElementById("grandTotal").innerText}`;
  
  window.open(`https://wa.me/55?text=${encodeURIComponent(msg)}`);
}

renderMenu();
renderCart();
</script>

</body>
</html>
