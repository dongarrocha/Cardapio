<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Card√°pio ‚Äî Espetos & Bebidas</title>
  <style>
    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#222}
    body{margin:0;background:linear-gradient(180deg,#fff 0%,#fffef8 100%);}
    header{padding:20px;text-align:center;background:#8B0000;color:white}
    header h1{margin:0;font-size:20px;letter-spacing:0.5px}
    header p{margin:6px 0 0;font-size:13px;opacity:0.95}
    .container{max-width:1100px;margin:18px auto;padding:12px}
    .layout{display:grid;grid-template-columns:1fr 360px;gap:18px}
    @media(max-width:980px){.layout{grid-template-columns:1fr}}
    .card{background:white;border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    .section-title{display:flex;align-items:center;gap:10px;margin:10px 0 12px}
    .grid-catalog{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media(max-width:900px){.grid-catalog{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:520px){.grid-catalog{grid-template-columns:1fr}}
    .item-card{border-radius:12px;border:1px solid #eee;padding:10px;display:flex;flex-direction:column;align-items:center;min-height:220px}
    .item-card img{width:100%;height:140px;object-fit:cover;border-radius:8px;background:#f5f5f5}
    .no-image{width:100%;height:140px;border-radius:8px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;color:#999;font-size:13px}
    .item-name{margin-top:8px;font-weight:700;text-align:center}
    .item-meta{font-size:13px;color:#666;margin-top:4px}
    .add-btn{margin-top:10px;background:#1976d2;color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
    /* cart */
    .cart{position:sticky;top:18px}
    .cart h3{margin:0 0 8px}
    .cart-list{max-height:420px;overflow:auto;display:flex;flex-direction:column;gap:8px}
    .cart-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;border:1px dashed #eee}
    .total-row{display:flex;justify-content:space-between;padding:12px 0;font-weight:700}
    input[type=number], input[type=text]{padding:8px;border-radius:8px;border:1px solid #ddd}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .note{font-size:13px;color:#555}
    footer{padding:14px;text-align:center;font-size:13px;color:#666}
    .pill{background:#f7f7f7;padding:6px 10px;border-radius:999px}
  </style>
</head>
<body>
  <header>
    <h1>Card√°pio ‚Äî Espetos, Bebidas, Sobremesas e Lanches</h1>
    <p>Toque na imagem para adicionar ao carrinho ‚Äî depois envie pelo WhatsApp.</p>
  </header>

  <div class="container">
    <div class="layout">
      <main>
        <div class="card">
          <div class="section-title"><h2 style="margin:0">üç¢ Espetos</h2></div>
          <div class="grid-catalog" id="catalog-espetos"></div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <div class="section-title"><h2 style="margin:0">ü•§ Bebidas</h2></div>
          <div class="grid-catalog" id="catalog-bebidas"></div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <div class="section-title"><h2 style="margin:0">üçß Sobremesas</h2></div>
          <div class="grid-catalog" id="catalog-sobremesas"></div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <div class="section-title"><h2 style="margin:0">üçî Lanches (P√£es)</h2></div>
          <div class="grid-catalog" id="catalog-lanches"></div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <div class="section-title"><h2 style="margin:0">üçΩÔ∏è Acompanhamentos</h2></div>
          <div class="grid-catalog" id="catalog-acompanhamentos"></div>
        </div>
      </main>

      <aside class="card cart">
        <div class="cart">
          <h3>Seu Pedido</h3>
          <div class="cart-list" id="cartList"></div>

          <div class="total-row">
            <div>Total itens</div>
            <div id="itemsTotal">0</div>
          </div>
          <div class="total-row">
            <div>Sub-total</div>
            <div id="subTotal">R$ 0,00</div>
          </div>
          <div class="total-row">
            <div>Taxa de entrega</div>
            <div id="fee">R$ 0,00</div>
          </div>
          <div class="total-row" style="font-size:18px">
            <div>Total</div>
            <div id="grandTotal">R$ 0,00</div>
          </div>

          <div style="height:8px"></div>
          <div class="card" style="padding:10px">
            <h4 style="margin:0 0 8px">Observa√ß√µes / Endere√ßo</h4>
            <textarea id="note" rows="3" style="width:100%;border-radius:8px;border:1px solid #ddd;padding:8px" placeholder="Ex: Retirar na loja, ou endere√ßo para entrega..."></textarea>
            <div style="height:8px"></div>
            <label class="note">Taxa de entrega (opcional)</label>
            <div style="height:8px"></div>
            <input id="deliveryFee" type="number" step="0.01" placeholder="0.00" style="width:150px" />
          </div>

          <div style="height:8px"></div>
          <div class="controls">
            <button id="whatsappBtn" class="add-btn">Enviar pelo WhatsApp</button>
            <button id="copyBtn" class="add-btn" style="background:#555">Copiar mensagem</button>
          </div>

          <div style="height:10px"></div>
          <div class="pill">N√∫mero de destino: <strong id="targetNumber">+55 47 99152-9698</strong></div>
          <div style="height:8px"></div>
          <div class="note">Ao adicionar imagens: envie para a pasta <code>imagens/</code> com os nomes mostrados abaixo.</div>
        </div>
      </aside>
    </div>
  </div>

  <footer>Feito para voc√™ ‚Äî modifique pre√ßos e itens conforme necess√°rio.</footer>

  <script>
    const PHONE = '5547991529698';

    // remover acentos (usa Normalization + remo√ß√£o de diacr√≠ticos)
    function removeAccents(str){
      return str.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
    }

    // gera nome de arquivo a partir do nome do produto:
    //  - troca "c/" por "com "
    //  - troca "/" por espa√ßo
    //  - remove acentos
    //  - substitui espa√ßos por '_' e coloca .png
    function filenameFromName(name){
      let s = name;
      s = s.replace(/c\\//ig, 'com ');
      s = s.replace(/\\//g, ' ');
      s = removeAccents(s);
      s = s.replace(/[^a-zA-Z0-9 ]/g, '');
      s = s.trim().toLowerCase().replace(/\\s+/g, '_');
      return s + '.png';
    }

    // Cat√°logo organizado por se√ß√£o (com P√ÉO DE ALHO em Espetos)
    const CATALOG = {
      espetos: [
        'CARNE', 'CARNE C/ BACON', 'CARNE C/ FRANGO', 'CARNE C/ QUEIJO', 'CARNE/ CALABRESA',
        'CALABRESA', 'FRANGO', 'FRANGO C/ BACON', 'FRANGO C/ QUEIJO', 'FRANGO/ CALABRESA',
        'CORA√á√ÉO BOVINO', 'CORA√á√ÉO FGO', 'TULIPA', 'TRI MISTO', 'P√ÉO DE ALHO', 'QUEIJO C/ BACON'
      ],
      bebidas: [
        'COCA 600', 'COCA LATA', 'COCA ZERO LATA', 'FANTA LATA', 'GUARAN√Å LATA', 'UVA LATA',
        'HEINEKEN', 'SPATEN', 'BUDWEISER', 'SUCO', '√ÅGUA C/ G√ÅS', '√ÅGUA S/ G√ÅS'
      ],
      sobremesas: [ 'A√áA√ç' ],
      lanches: [ 'P√ÉO BOVINO', 'P√ÉO DE CALABRESA', 'P√ÉO DE CORA√á√ÉO', 'P√ÉO ESPECIAL' ],
      acompanhamentos: [ 'ACOMPANHAMENTO', 'MILHO', 'QUEIJO' ]
    };

    // pre√ßos iniciais (voc√™ pode ajustar depois)
    const DEFAULT_PRICES = {
      'CARNE':18,'CARNE_C_BACON':20,'CARNE_C_FRANGO':19,'CARNE_C_QUEIJO':20,'CARNE_CALABRESA':18,
      'CALABRESA':16,'FRANGO':16,'FRANGO_C_BACON':18,'FRANGO_C_QUEIJO':18,'FRANGO_CALABRESA':17,
      'CORA√á√ÉO_BOVINO':15,'CORA√á√ÉO_FGO':12,'TULIPA':10,'TRI_MISTO':22,'P√ÉO_DE_ALHO':6,'QUEIJO_C_BACON':9,
      'COCA_600':8,'COCA_LATA':6,'COCA_ZERO_LATA':6,'FANTA_LATA':6,'GUARAN√Å_LATA':6,'UVA_LATA':6,
      'HEINEKEN':10,'SPATEN':12,'BUDWEISER':12,'SUCO':7,'AGUA_C_GAS':4,'AGUA_S_GAS':4,
      'ACAI':20,'P√ÉO_BOVINO':5,'P√ÉO_DE_CALABRESA':7,'P√ÉO_DE_CORACAO':6,'P√ÉO_ESPECIAL':8,
      'ACOMPANHAMENTO':5,'MILHO':5,'QUEIJO':7
    };

    function keyFromName(name){
      let k = name.replace(/c\\//ig, 'com ');
      k = k.replace(/\\//g,' ');
      k = removeAccents(k).trim().toUpperCase().replace(/\s+/g,'_');
      return k;
    }

    // estado do carrinho
    const state = { cart: {} };

    function money(v){ return 'R$ ' + Number(v||0).toFixed(2).replace('.',','); }

    function createItemObject(name){
      const fname = filenameFromName(name);
      const priceKey = keyFromName(name);
      const price = DEFAULT_PRICES[priceKey] || 0;
      return { name, file: 'imagens/' + fname, price };
    }

    function renderSection(sectionId, items){
      const container = document.getElementById(sectionId); container.innerHTML = '';
      items.forEach(name => {
        const item = createItemObject(name);
        const div = document.createElement('div'); div.className = 'item-card';
        div.innerHTML = `
          <div class="media-wrap">
            <img src="${item.file}" alt="${item.name}" data-file="${item.file}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div class="no-image" style="display:none">Sem imagem<br><small style='color:#bbb'>Adicione ${item.file}</small></div>
          </div>
          <div class="item-name">${item.name}</div>
          <div class="item-meta">${money(item.price)}</div>
          <button class="add-btn" data-name="${item.name}" data-price="${item.price}">Adicionar</button>
        `;
        container.appendChild(div);
      });
    }

    function renderAll(){
      renderSection('catalog-espetos', CATALOG.espetos);
      renderSection('catalog-bebidas', CATALOG.bebidas);
      renderSection('catalog-sobremesas', CATALOG.sobremesas);
      renderSection('catalog-lanches', CATALOG.lanches);
      renderSection('catalog-acompanhamentos', CATALOG.acompanhamentos);
      renderCart();
      document.querySelectorAll('.add-btn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const name = btn.dataset.name; const price = parseFloat(btn.dataset.price);
          addToCart(name, price);
        });
      });
    }

    function addToCart(name, price){
      const key = name;
      if(!state.cart[key]) state.cart[key] = { name, price, qtd:0 };
      state.cart[key].qtd++;
      renderCart();
    }

    function renderCart(){
      const cartList = document.getElementById('cartList'); cartList.innerHTML = '';
      let sub = 0, items = 0;
      Object.keys(state.cart).forEach(key=>{
        const it = state.cart[key]; items += it.qtd; sub += it.qtd*it.price;
        const el = document.createElement('div'); el.className='cart-item';
        el.innerHTML = `
          <div style="max-width:65%">${it.name} <div class="meta" style="font-size:12px;color:#666">${money(it.price)} cada</div></div>
          <div style="display:flex;gap:8px;align-items:center">
            <button class="qty-btn" data-op="-" data-key="${key}">-</button>
            <div>${it.qtd}</div>
            <button class="qty-btn" data-op="+" data-key="${key}">+</button>
            <button class="small" data-remove="${key}">Remover</button>
          </div>
        `;
        cartList.appendChild(el);
      });
      const fee = parseFloat(document.getElementById('deliveryFee')?.value || 0);
      document.getElementById('itemsTotal').textContent = items;
      document.getElementById('subTotal').textContent = money(sub);
      document.getElementById('fee').textContent = money(fee);
      document.getElementById('grandTotal').textContent = money(sub + (isNaN(fee)?0:fee));

      document.querySelectorAll('.qty-btn').forEach(b=>b.addEventListener('click', ()=>{
        const key = b.dataset.key, op = b.dataset.op;
        if(op=='+') state.cart[key].qtd++; else { state.cart[key].qtd--; if(state.cart[key].qtd<=0) delete state.cart[key]; }
        renderCart();
      }));
      document.querySelectorAll('[data-remove]').forEach(btn=>btn.addEventListener('click', ()=>{ delete state.cart[btn.dataset.remove]; renderCart(); }));
    }

    function buildMessage(){
      const lines = [];
      lines.push('Pedido: Espetos & Bebidas'); lines.push('');
      let sub = 0;
      Object.keys(state.cart).forEach(k=>{
        const it = state.cart[k];
        lines.push(`- ${it.name} x${it.qtd} ‚Äî R$ ${Number(it.price*it.qtd).toFixed(2).replace('.',',')}`);
        sub += it.price*it.qtd;
      });
      lines.push('');
      lines.push('Sub-total: R$ ' + Number(sub).toFixed(2).replace('.',','));
      const fee = parseFloat(document.getElementById('deliveryFee')?.value || 0);
      if(fee && !isNaN(fee)) lines.push('Taxa de entrega: R$ ' + Number(fee).toFixed(2).replace('.',','));
      lines.push('Total: R$ ' + Number(sub + (isNaN(fee)?0:fee)).toFixed(2).replace('.',','));
      const note = document.getElementById('note')?.value.trim();
      if(note){ lines.push(''); lines.push('Observa√ß√µes:'); lines.push(note); }
      lines.push(''); lines.push('---\\nEnviado via Card√°pio Online');
      return lines.join('\\n');
    }

    function openWhatsApp(){
      if(Object.keys(state.cart).length===0){ alert('Seu carrinho est√° vazio. Adicione pelo menos um item.'); return; }
      const text = encodeURIComponent(buildMessage());
      const url = `https://wa.me/${PHONE}?text=${text}`;
      window.open(url,'_blank');
    }

    (function(){
      renderAll();
      document.getElementById('deliveryFee')?.addEventListener('input', renderCart);
      document.getElementById('whatsappBtn')?.addEventListener('click', openWhatsApp);
      document.getElementById('copyBtn')?.addEventListener('click', ()=>{ navigator.clipboard.writeText(buildMessage()).then(()=>alert('Mensagem copiada!')) });
      document.getElementById('targetNumber').textContent = '+55 47 99152-9698';
    })();
  </script>
</body>
</html>
